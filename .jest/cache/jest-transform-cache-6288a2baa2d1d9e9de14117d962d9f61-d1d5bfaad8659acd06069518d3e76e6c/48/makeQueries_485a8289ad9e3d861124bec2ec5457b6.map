{"version":3,"sources":["makeQueries.js"],"names":["Object","defineProperty","exports","value","makeQueries","_waitFor","_interopRequireDefault","require","_errors","obj","__esModule","default","queryAllByQuery","getMissingError","getMultipleError","getAllByQuery","instance","getAllFn","args","results","length","ErrorWithStack","queryByQuery","singleQueryFn","getByQuery","getFn","findAllByQuery","findAllFn","waitForOptions","findByQuery","findFn","getBy","getAllBy","queryBy","findBy","findAllBy"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.makeQueries = makeQueries;\n\nvar _waitFor = _interopRequireDefault(require(\"../waitFor\"));\n\nvar _errors = require(\"./errors\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction makeQueries(queryAllByQuery, getMissingError, getMultipleError) {\n  function getAllByQuery(instance) {\n    return function getAllFn(args) {\n      const results = queryAllByQuery(instance)(args);\n\n      if (results.length === 0) {\n        throw new _errors.ErrorWithStack(getMissingError(args), getAllFn);\n      }\n\n      return results;\n    };\n  }\n\n  function queryByQuery(instance) {\n    return function singleQueryFn(args) {\n      const results = queryAllByQuery(instance)(args);\n\n      if (results.length > 1) {\n        throw new _errors.ErrorWithStack(getMultipleError(args), singleQueryFn);\n      }\n\n      if (results.length === 0) {\n        return null;\n      }\n\n      return results[0];\n    };\n  }\n\n  function getByQuery(instance) {\n    return function getFn(args) {\n      const results = queryAllByQuery(instance)(args);\n\n      if (results.length > 1) {\n        throw new _errors.ErrorWithStack(getMultipleError(args), getFn);\n      }\n\n      if (results.length === 0) {\n        throw new _errors.ErrorWithStack(getMissingError(args), getFn);\n      }\n\n      return results[0];\n    };\n  }\n\n  function findAllByQuery(instance) {\n    return function findAllFn(args, waitForOptions = {}) {\n      return (0, _waitFor.default)(() => getAllByQuery(instance)(args), waitForOptions);\n    };\n  }\n\n  function findByQuery(instance) {\n    return function findFn(args, waitForOptions = {}) {\n      return (0, _waitFor.default)(() => getByQuery(instance)(args), waitForOptions);\n    };\n  }\n\n  return {\n    getBy: getByQuery,\n    getAllBy: getAllByQuery,\n    queryBy: queryByQuery,\n    findBy: findByQuery,\n    findAllBy: findAllByQuery\n  };\n}"]}