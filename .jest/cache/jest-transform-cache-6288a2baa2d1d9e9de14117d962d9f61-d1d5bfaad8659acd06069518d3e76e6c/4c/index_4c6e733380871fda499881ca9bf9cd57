01abfef7f08915ffb1c6dc09de00667d
'use strict';

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));

var wrapAnsi16 = function wrapAnsi16(fn, offset) {
  return function () {
    var code = fn.apply(void 0, arguments);
    return "\x1B[" + (code + offset) + "m";
  };
};

var wrapAnsi256 = function wrapAnsi256(fn, offset) {
  return function () {
    var code = fn.apply(void 0, arguments);
    return "\x1B[" + (38 + offset) + ";5;" + code + "m";
  };
};

var wrapAnsi16m = function wrapAnsi16m(fn, offset) {
  return function () {
    var rgb = fn.apply(void 0, arguments);
    return "\x1B[" + (38 + offset) + ";2;" + rgb[0] + ";" + rgb[1] + ";" + rgb[2] + "m";
  };
};

var ansi2ansi = function ansi2ansi(n) {
  return n;
};

var rgb2rgb = function rgb2rgb(r, g, b) {
  return [r, g, b];
};

var setLazyProperty = function setLazyProperty(object, property, _get) {
  Object.defineProperty(object, property, {
    get: function get() {
      var value = _get();

      Object.defineProperty(object, property, {
        value: value,
        enumerable: true,
        configurable: true
      });
      return value;
    },
    enumerable: true,
    configurable: true
  });
};

var colorConvert;

var makeDynamicStyles = function makeDynamicStyles(wrap, targetSpace, identity, isBackground) {
  if (colorConvert === undefined) {
    colorConvert = require('color-convert');
  }

  var offset = isBackground ? 10 : 0;
  var styles = {};

  for (var _i = 0, _Object$entries = Object.entries(colorConvert); _i < _Object$entries.length; _i++) {
    var _ref = _Object$entries[_i];

    var _ref2 = (0, _slicedToArray2.default)(_ref, 2);

    var sourceSpace = _ref2[0];
    var suite = _ref2[1];
    var name = sourceSpace === 'ansi16' ? 'ansi' : sourceSpace;

    if (sourceSpace === targetSpace) {
      styles[name] = wrap(identity, offset);
    } else if (typeof suite === 'object') {
      styles[name] = wrap(suite[targetSpace], offset);
    }
  }

  return styles;
};

function assembleStyles() {
  var codes = new Map();
  var styles = {
    modifier: {
      reset: [0, 0],
      bold: [1, 22],
      dim: [2, 22],
      italic: [3, 23],
      underline: [4, 24],
      inverse: [7, 27],
      hidden: [8, 28],
      strikethrough: [9, 29]
    },
    color: {
      black: [30, 39],
      red: [31, 39],
      green: [32, 39],
      yellow: [33, 39],
      blue: [34, 39],
      magenta: [35, 39],
      cyan: [36, 39],
      white: [37, 39],
      blackBright: [90, 39],
      redBright: [91, 39],
      greenBright: [92, 39],
      yellowBright: [93, 39],
      blueBright: [94, 39],
      magentaBright: [95, 39],
      cyanBright: [96, 39],
      whiteBright: [97, 39]
    },
    bgColor: {
      bgBlack: [40, 49],
      bgRed: [41, 49],
      bgGreen: [42, 49],
      bgYellow: [43, 49],
      bgBlue: [44, 49],
      bgMagenta: [45, 49],
      bgCyan: [46, 49],
      bgWhite: [47, 49],
      bgBlackBright: [100, 49],
      bgRedBright: [101, 49],
      bgGreenBright: [102, 49],
      bgYellowBright: [103, 49],
      bgBlueBright: [104, 49],
      bgMagentaBright: [105, 49],
      bgCyanBright: [106, 49],
      bgWhiteBright: [107, 49]
    }
  };
  styles.color.gray = styles.color.blackBright;
  styles.bgColor.bgGray = styles.bgColor.bgBlackBright;
  styles.color.grey = styles.color.blackBright;
  styles.bgColor.bgGrey = styles.bgColor.bgBlackBright;

  for (var _i2 = 0, _Object$entries2 = Object.entries(styles); _i2 < _Object$entries2.length; _i2++) {
    var _ref3 = _Object$entries2[_i2];

    var _ref4 = (0, _slicedToArray2.default)(_ref3, 2);

    var groupName = _ref4[0];
    var group = _ref4[1];

    for (var _i3 = 0, _Object$entries3 = Object.entries(group); _i3 < _Object$entries3.length; _i3++) {
      var _ref5 = _Object$entries3[_i3];

      var _ref6 = (0, _slicedToArray2.default)(_ref5, 2);

      var styleName = _ref6[0];
      var style = _ref6[1];
      styles[styleName] = {
        open: "\x1B[" + style[0] + "m",
        close: "\x1B[" + style[1] + "m"
      };
      group[styleName] = styles[styleName];
      codes.set(style[0], style[1]);
    }

    Object.defineProperty(styles, groupName, {
      value: group,
      enumerable: false
    });
  }

  Object.defineProperty(styles, 'codes', {
    value: codes,
    enumerable: false
  });
  styles.color.close = "\x1B[39m";
  styles.bgColor.close = "\x1B[49m";
  setLazyProperty(styles.color, 'ansi', function () {
    return makeDynamicStyles(wrapAnsi16, 'ansi16', ansi2ansi, false);
  });
  setLazyProperty(styles.color, 'ansi256', function () {
    return makeDynamicStyles(wrapAnsi256, 'ansi256', ansi2ansi, false);
  });
  setLazyProperty(styles.color, 'ansi16m', function () {
    return makeDynamicStyles(wrapAnsi16m, 'rgb', rgb2rgb, false);
  });
  setLazyProperty(styles.bgColor, 'ansi', function () {
    return makeDynamicStyles(wrapAnsi16, 'ansi16', ansi2ansi, true);
  });
  setLazyProperty(styles.bgColor, 'ansi256', function () {
    return makeDynamicStyles(wrapAnsi256, 'ansi256', ansi2ansi, true);
  });
  setLazyProperty(styles.bgColor, 'ansi16m', function () {
    return makeDynamicStyles(wrapAnsi16m, 'rgb', rgb2rgb, true);
  });
  return styles;
}

Object.defineProperty(module, 'exports', {
  enumerable: true,
  get: assembleStyles
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIndyYXBBbnNpMTYiLCJmbiIsIm9mZnNldCIsImNvZGUiLCJ3cmFwQW5zaTI1NiIsIndyYXBBbnNpMTZtIiwicmdiIiwiYW5zaTJhbnNpIiwibiIsInJnYjJyZ2IiLCJyIiwiZyIsImIiLCJzZXRMYXp5UHJvcGVydHkiLCJvYmplY3QiLCJwcm9wZXJ0eSIsImdldCIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwidmFsdWUiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwiY29sb3JDb252ZXJ0IiwibWFrZUR5bmFtaWNTdHlsZXMiLCJ3cmFwIiwidGFyZ2V0U3BhY2UiLCJpZGVudGl0eSIsImlzQmFja2dyb3VuZCIsInVuZGVmaW5lZCIsInJlcXVpcmUiLCJzdHlsZXMiLCJlbnRyaWVzIiwic291cmNlU3BhY2UiLCJzdWl0ZSIsIm5hbWUiLCJhc3NlbWJsZVN0eWxlcyIsImNvZGVzIiwiTWFwIiwibW9kaWZpZXIiLCJyZXNldCIsImJvbGQiLCJkaW0iLCJpdGFsaWMiLCJ1bmRlcmxpbmUiLCJpbnZlcnNlIiwiaGlkZGVuIiwic3RyaWtldGhyb3VnaCIsImNvbG9yIiwiYmxhY2siLCJyZWQiLCJncmVlbiIsInllbGxvdyIsImJsdWUiLCJtYWdlbnRhIiwiY3lhbiIsIndoaXRlIiwiYmxhY2tCcmlnaHQiLCJyZWRCcmlnaHQiLCJncmVlbkJyaWdodCIsInllbGxvd0JyaWdodCIsImJsdWVCcmlnaHQiLCJtYWdlbnRhQnJpZ2h0IiwiY3lhbkJyaWdodCIsIndoaXRlQnJpZ2h0IiwiYmdDb2xvciIsImJnQmxhY2siLCJiZ1JlZCIsImJnR3JlZW4iLCJiZ1llbGxvdyIsImJnQmx1ZSIsImJnTWFnZW50YSIsImJnQ3lhbiIsImJnV2hpdGUiLCJiZ0JsYWNrQnJpZ2h0IiwiYmdSZWRCcmlnaHQiLCJiZ0dyZWVuQnJpZ2h0IiwiYmdZZWxsb3dCcmlnaHQiLCJiZ0JsdWVCcmlnaHQiLCJiZ01hZ2VudGFCcmlnaHQiLCJiZ0N5YW5CcmlnaHQiLCJiZ1doaXRlQnJpZ2h0IiwiZ3JheSIsImJnR3JheSIsImdyZXkiLCJiZ0dyZXkiLCJncm91cE5hbWUiLCJncm91cCIsInN0eWxlTmFtZSIsInN0eWxlIiwib3BlbiIsImNsb3NlIiwic2V0IiwibW9kdWxlIl0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7O0FBRUEsSUFBTUEsVUFBVSxHQUFHLFNBQWJBLFVBQWEsQ0FBQ0MsRUFBRCxFQUFLQyxNQUFMO0FBQUEsU0FBZ0IsWUFBYTtBQUMvQyxRQUFNQyxJQUFJLEdBQUdGLEVBQUUsTUFBRixtQkFBYjtBQUNBLHNCQUFpQkUsSUFBSSxHQUFHRCxNQUF4QjtBQUNBLEdBSGtCO0FBQUEsQ0FBbkI7O0FBS0EsSUFBTUUsV0FBVyxHQUFHLFNBQWRBLFdBQWMsQ0FBQ0gsRUFBRCxFQUFLQyxNQUFMO0FBQUEsU0FBZ0IsWUFBYTtBQUNoRCxRQUFNQyxJQUFJLEdBQUdGLEVBQUUsTUFBRixtQkFBYjtBQUNBLHNCQUFpQixLQUFLQyxNQUF0QixZQUFrQ0MsSUFBbEM7QUFDQSxHQUhtQjtBQUFBLENBQXBCOztBQUtBLElBQU1FLFdBQVcsR0FBRyxTQUFkQSxXQUFjLENBQUNKLEVBQUQsRUFBS0MsTUFBTDtBQUFBLFNBQWdCLFlBQWE7QUFDaEQsUUFBTUksR0FBRyxHQUFHTCxFQUFFLE1BQUYsbUJBQVo7QUFDQSxzQkFBaUIsS0FBS0MsTUFBdEIsWUFBa0NJLEdBQUcsQ0FBQyxDQUFELENBQXJDLFNBQTRDQSxHQUFHLENBQUMsQ0FBRCxDQUEvQyxTQUFzREEsR0FBRyxDQUFDLENBQUQsQ0FBekQ7QUFDQSxHQUhtQjtBQUFBLENBQXBCOztBQUtBLElBQU1DLFNBQVMsR0FBRyxTQUFaQSxTQUFZLENBQUFDLENBQUM7QUFBQSxTQUFJQSxDQUFKO0FBQUEsQ0FBbkI7O0FBQ0EsSUFBTUMsT0FBTyxHQUFHLFNBQVZBLE9BQVUsQ0FBQ0MsQ0FBRCxFQUFJQyxDQUFKLEVBQU9DLENBQVA7QUFBQSxTQUFhLENBQUNGLENBQUQsRUFBSUMsQ0FBSixFQUFPQyxDQUFQ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QixTQUE5QixFQUF5QztBQUN4Q3hFLEVBQUFBLFVBQVUsRUFBRSxJQUQ0QjtBQUV4Q0osRUFBQUEsR0FBRyxFQUFFbUI7QUFGbUMsQ0FBekMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbmNvbnN0IHdyYXBBbnNpMTYgPSAoZm4sIG9mZnNldCkgPT4gKC4uLmFyZ3MpID0+IHtcblx0Y29uc3QgY29kZSA9IGZuKC4uLmFyZ3MpO1xuXHRyZXR1cm4gYFxcdTAwMUJbJHtjb2RlICsgb2Zmc2V0fW1gO1xufTtcblxuY29uc3Qgd3JhcEFuc2kyNTYgPSAoZm4sIG9mZnNldCkgPT4gKC4uLmFyZ3MpID0+IHtcblx0Y29uc3QgY29kZSA9IGZuKC4uLmFyZ3MpO1xuXHRyZXR1cm4gYFxcdTAwMUJbJHszOCArIG9mZnNldH07NTske2NvZGV9bWA7XG59O1xuXG5jb25zdCB3cmFwQW5zaTE2bSA9IChmbiwgb2Zmc2V0KSA9PiAoLi4uYXJncykgPT4ge1xuXHRjb25zdCByZ2IgPSBmbiguLi5hcmdzKTtcblx0cmV0dXJuIGBcXHUwMDFCWyR7MzggKyBvZmZzZXR9OzI7JHtyZ2JbMF19OyR7cmdiWzFdfTske3JnYlsyXX1tYDtcbn07XG5cbmNvbnN0IGFuc2kyYW5zaSA9IG4gPT4gbjtcbmNvbnN0IHJnYjJyZ2IgPSAociwgZywgYikgPT4gW3IsIGcsIGJdO1xuXG5jb25zdCBzZXRMYXp5UHJvcGVydHkgPSAob2JqZWN0LCBwcm9wZXJ0eSwgZ2V0KSA9PiB7XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmplY3QsIHByb3BlcnR5LCB7XG5cdFx0Z2V0OiAoKSA9PiB7XG5cdFx0XHRjb25zdCB2YWx1ZSA9IGdldCgpO1xuXG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqZWN0LCBwcm9wZXJ0eSwge1xuXHRcdFx0XHR2YWx1ZSxcblx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcblx0XHRcdFx0Y29uZmlndXJhYmxlOiB0cnVlXG5cdFx0XHR9KTtcblxuXHRcdFx0cmV0dXJuIHZhbHVlO1xuXHRcdH0sXG5cdFx0ZW51bWVyYWJsZTogdHJ1ZSxcblx0XHRjb25maWd1cmFibGU6IHRydWVcblx0fSk7XG59O1xuXG4vKiogQHR5cGUge3R5cGVvZiBpbXBvcnQoJ2NvbG9yLWNvbnZlcnQnKX0gKi9cbmxldCBjb2xvckNvbnZlcnQ7XG5jb25zdCBtYWtlRHluYW1pY1N0eWxlcyA9ICh3cmFwLCB0YXJnZXRTcGFjZSwgaWRlbnRpdHksIGlzQmFja2dyb3VuZCkgPT4ge1xuXHRpZiAoY29sb3JDb252ZXJ0ID09PSB1bmRlZmluZWQpIHtcblx0XHRjb2xvckNvbnZlcnQgPSByZXF1aXJlKCdjb2xvci1jb252ZXJ0Jyk7XG5cdH1cblxuXHRjb25zdCBvZmZzZXQgPSBpc0JhY2tncm91bmQgPyAxMCA6IDA7XG5cdGNvbnN0IHN0eWxlcyA9IHt9O1xuXG5cdGZvciAoY29uc3QgW3NvdXJjZVNwYWNlLCBzdWl0ZV0gb2YgT2JqZWN0LmVudHJpZXMoY29sb3JDb252ZXJ0KSkge1xuXHRcdGNvbnN0IG5hbWUgPSBzb3VyY2VTcGFjZSA9PT0gJ2Fuc2kxNicgPyAnYW5zaScgOiBzb3VyY2VTcGFjZTtcblx0XHRpZiAoc291cmNlU3BhY2UgPT09IHRhcmdldFNwYWNlKSB7XG5cdFx0XHRzdHlsZXNbbmFtZV0gPSB3cmFwKGlkZW50aXR5LCBvZmZzZXQpO1xuXHRcdH0gZWxzZSBpZiAodHlwZW9mIHN1aXRlID09PSAnb2JqZWN0Jykge1xuXHRcdFx0c3R5bGVzW25hbWVdID0gd3JhcChzdWl0ZVt0YXJnZXRTcGFjZV0sIG9mZnNldCk7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIHN0eWxlcztcbn07XG5cbmZ1bmN0aW9uIGFzc2VtYmxlU3R5bGVzKCkge1xuXHRjb25zdCBjb2RlcyA9IG5ldyBNYXAoKTtcblx0Y29uc3Qgc3R5bGVzID0ge1xuXHRcdG1vZGlmaWVyOiB7XG5cdFx0XHRyZXNldDogWzAsIDBdLFxuXHRcdFx0Ly8gMjEgaXNuJ3Qgd2lkZWx5IHN1cHBvcnRlZCBhbmQgMjIgZG9lcyB0aGUgc2FtZSB0aGluZ1xuXHRcdFx0Ym9sZDogWzEsIDIyXSxcblx0XHRcdGRpbTogWzIsIDIyXSxcblx0XHRcdGl0YWxpYzogWzMsIDIzXSxcblx0XHRcdHVuZGVybGluZTogWzQsIDI0XSxcblx0XHRcdGludmVyc2U6IFs3LCAyN10sXG5cdFx0XHRoaWRkZW46IFs4LCAyOF0sXG5cdFx0XHRzdHJpa2V0aHJvdWdoOiBbOSwgMjldXG5cdFx0fSxcblx0XHRjb2xvcjoge1xuXHRcdFx0YmxhY2s6IFszMCwgMzldLFxuXHRcdFx0cmVkOiBbMzEsIDM5XSxcblx0XHRcdGdyZWVuOiBbMzIsIDM5XSxcblx0XHRcdHllbGxvdzogWzMzLCAzOV0sXG5cdFx0XHRibHVlOiBbMzQsIDM5XSxcblx0XHRcdG1hZ2VudGE6IFszNSwgMzldLFxuXHRcdFx0Y3lhbjogWzM2LCAzOV0sXG5cdFx0XHR3aGl0ZTogWzM3LCAzOV0sXG5cblx0XHRcdC8vIEJyaWdodCBjb2xvclxuXHRcdFx0YmxhY2tCcmlnaHQ6IFs5MCwgMzldLFxuXHRcdFx0cmVkQnJpZ2h0OiBbOTEsIDM5XSxcblx0XHRcdGdyZWVuQnJpZ2h0OiBbOTIsIDM5XSxcblx0XHRcdHllbGxvd0JyaWdodDogWzkzLCAzOV0sXG5cdFx0XHRibHVlQnJpZ2h0OiBbOTQsIDM5XSxcblx0XHRcdG1hZ2VudGFCcmlnaHQ6IFs5NSwgMzldLFxuXHRcdFx0Y3lhbkJyaWdodDogWzk2LCAzOV0sXG5cdFx0XHR3aGl0ZUJyaWdodDogWzk3LCAzOV1cblx0XHR9LFxuXHRcdGJnQ29sb3I6IHtcblx0XHRcdGJnQmxhY2s6IFs0MCwgNDldLFxuXHRcdFx0YmdSZWQ6IFs0MSwgNDldLFxuXHRcdFx0YmdHcmVlbjogWzQyLCA0OV0sXG5cdFx0XHRiZ1llbGxvdzogWzQzLCA0OV0sXG5cdFx0XHRiZ0JsdWU6IFs0NCwgNDldLFxuXHRcdFx0YmdNYWdlbnRhOiBbNDUsIDQ5XSxcblx0XHRcdGJnQ3lhbjogWzQ2LCA0OV0sXG5cdFx0XHRiZ1doaXRlOiBbNDcsIDQ5XSxcblxuXHRcdFx0Ly8gQnJpZ2h0IGNvbG9yXG5cdFx0XHRiZ0JsYWNrQnJpZ2h0OiBbMTAwLCA0OV0sXG5cdFx0XHRiZ1JlZEJyaWdodDogWzEwMSwgNDldLFxuXHRcdFx0YmdHcmVlbkJyaWdodDogWzEwMiwgNDldLFxuXHRcdFx0YmdZZWxsb3dCcmlnaHQ6IFsxMDMsIDQ5XSxcblx0XHRcdGJnQmx1ZUJyaWdodDogWzEwNCwgNDldLFxuXHRcdFx0YmdNYWdlbnRhQnJpZ2h0OiBbMTA1LCA0OV0sXG5cdFx0XHRiZ0N5YW5CcmlnaHQ6IFsxMDYsIDQ5XSxcblx0XHRcdGJnV2hpdGVCcmlnaHQ6IFsxMDcsIDQ5XVxuXHRcdH1cblx0fTtcblxuXHQvLyBBbGlhcyBicmlnaHQgYmxhY2sgYXMgZ3JheSAoYW5kIGdyZXkpXG5cdHN0eWxlcy5jb2xvci5ncmF5ID0gc3R5bGVzLmNvbG9yLmJsYWNrQnJpZ2h0O1xuXHRzdHlsZXMuYmdDb2xvci5iZ0dyYXkgPSBzdHlsZXMuYmdDb2xvci5iZ0JsYWNrQnJpZ2h0O1xuXHRzdHlsZXMuY29sb3IuZ3JleSA9IHN0eWxlcy5jb2xvci5ibGFja0JyaWdodDtcblx0c3R5bGVzLmJnQ29sb3IuYmdHcmV5ID0gc3R5bGVzLmJnQ29sb3IuYmdCbGFja0JyaWdodDtcblxuXHRmb3IgKGNvbnN0IFtncm91cE5hbWUsIGdyb3VwXSBvZiBPYmplY3QuZW50cmllcyhzdHlsZXMpKSB7XG5cdFx0Zm9yIChjb25zdCBbc3R5bGVOYW1lLCBzdHlsZV0gb2YgT2JqZWN0LmVudHJpZXMoZ3JvdXApKSB7XG5cdFx0XHRzdHlsZXNbc3R5bGVOYW1lXSA9IHtcblx0XHRcdFx0b3BlbjogYFxcdTAwMUJbJHtzdHlsZVswXX1tYCxcblx0XHRcdFx0Y2xvc2U6IGBcXHUwMDFCWyR7c3R5bGVbMV19bWBcblx0XHRcdH07XG5cblx0XHRcdGdyb3VwW3N0eWxlTmFtZV0gPSBzdHlsZXNbc3R5bGVOYW1lXTtcblxuXHRcdFx0Y29kZXMuc2V0KHN0eWxlWzBdLCBzdHlsZVsxXSk7XG5cdFx0fVxuXG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KHN0eWxlcywgZ3JvdXBOYW1lLCB7XG5cdFx0XHR2YWx1ZTogZ3JvdXAsXG5cdFx0XHRlbnVtZXJhYmxlOiBmYWxzZVxuXHRcdH0pO1xuXHR9XG5cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KHN0eWxlcywgJ2NvZGVzJywge1xuXHRcdHZhbHVlOiBjb2Rlcyxcblx0XHRlbnVtZXJhYmxlOiBmYWxzZVxuXHR9KTtcblxuXHRzdHlsZXMuY29sb3IuY2xvc2UgPSAnXFx1MDAxQlszOW0nO1xuXHRzdHlsZXMuYmdDb2xvci5jbG9zZSA9ICdcXHUwMDFCWzQ5bSc7XG5cblx0c2V0TGF6eVByb3BlcnR5KHN0eWxlcy5jb2xvciwgJ2Fuc2knLCAoKSA9PiBtYWtlRHluYW1pY1N0eWxlcyh3cmFwQW5zaTE2LCAnYW5zaTE2JywgYW5zaTJhbnNpLCBmYWxzZSkpO1xuXHRzZXRMYXp5UHJvcGVydHkoc3R5bGVzLmNvbG9yLCAnYW5zaTI1NicsICgpID0+IG1ha2VEeW5hbWljU3R5bGVzKHdyYXBBbnNpMjU2LCAnYW5zaTI1NicsIGFuc2kyYW5zaSwgZmFsc2UpKTtcblx0c2V0TGF6eVByb3BlcnR5KHN0eWxlcy5jb2xvciwgJ2Fuc2kxNm0nLCAoKSA9PiBtYWtlRHluYW1pY1N0eWxlcyh3cmFwQW5zaTE2bSwgJ3JnYicsIHJnYjJyZ2IsIGZhbHNlKSk7XG5cdHNldExhenlQcm9wZXJ0eShzdHlsZXMuYmdDb2xvciwgJ2Fuc2knLCAoKSA9PiBtYWtlRHluYW1pY1N0eWxlcyh3cmFwQW5zaTE2LCAnYW5zaTE2JywgYW5zaTJhbnNpLCB0cnVlKSk7XG5cdHNldExhenlQcm9wZXJ0eShzdHlsZXMuYmdDb2xvciwgJ2Fuc2kyNTYnLCAoKSA9PiBtYWtlRHluYW1pY1N0eWxlcyh3cmFwQW5zaTI1NiwgJ2Fuc2kyNTYnLCBhbnNpMmFuc2ksIHRydWUpKTtcblx0c2V0TGF6eVByb3BlcnR5KHN0eWxlcy5iZ0NvbG9yLCAnYW5zaTE2bScsICgpID0+IG1ha2VEeW5hbWljU3R5bGVzKHdyYXBBbnNpMTZtLCAncmdiJywgcmdiMnJnYiwgdHJ1ZSkpO1xuXG5cdHJldHVybiBzdHlsZXM7XG59XG5cbi8vIE1ha2UgdGhlIGV4cG9ydCBpbW11dGFibGVcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShtb2R1bGUsICdleHBvcnRzJywge1xuXHRlbnVtZXJhYmxlOiB0cnVlLFxuXHRnZXQ6IGFzc2VtYmxlU3R5bGVzXG59KTtcbiJdfQ==