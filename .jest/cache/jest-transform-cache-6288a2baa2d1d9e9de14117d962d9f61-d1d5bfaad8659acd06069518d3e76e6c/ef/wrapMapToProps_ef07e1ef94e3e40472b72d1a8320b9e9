2ccbbdb0932b72e5c2142169e9d9d620
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

exports.__esModule = true;
exports.wrapMapToPropsConstant = wrapMapToPropsConstant;
exports.getDependsOnOwnProps = getDependsOnOwnProps;
exports.wrapMapToPropsFunc = wrapMapToPropsFunc;

var _verifyPlainObject = _interopRequireDefault(require("../utils/verifyPlainObject"));

function wrapMapToPropsConstant(getConstant) {
  return function initConstantSelector(dispatch, options) {
    var constant = getConstant(dispatch, options);

    function constantSelector() {
      return constant;
    }

    constantSelector.dependsOnOwnProps = false;
    return constantSelector;
  };
}

function getDependsOnOwnProps(mapToProps) {
  return mapToProps.dependsOnOwnProps !== null && mapToProps.dependsOnOwnProps !== undefined ? Boolean(mapToProps.dependsOnOwnProps) : mapToProps.length !== 1;
}

function wrapMapToPropsFunc(mapToProps, methodName) {
  return function initProxySelector(dispatch, _ref) {
    var displayName = _ref.displayName;

    var proxy = function mapToPropsProxy(stateOrDispatch, ownProps) {
      return proxy.dependsOnOwnProps ? proxy.mapToProps(stateOrDispatch, ownProps) : proxy.mapToProps(stateOrDispatch);
    };

    proxy.dependsOnOwnProps = true;

    proxy.mapToProps = function detectFactoryAndVerify(stateOrDispatch, ownProps) {
      proxy.mapToProps = mapToProps;
      proxy.dependsOnOwnProps = getDependsOnOwnProps(mapToProps);
      var props = proxy(stateOrDispatch, ownProps);

      if (typeof props === 'function') {
        proxy.mapToProps = props;
        proxy.dependsOnOwnProps = getDependsOnOwnProps(props);
        props = proxy(stateOrDispatch, ownProps);
      }

      if (process.env.NODE_ENV !== 'production') (0, _verifyPlainObject["default"])(props, displayName, methodName);
      return props;
    };

    return proxy;
  };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndyYXBNYXBUb1Byb3BzLmpzIl0sIm5hbWVzIjpbIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiZXhwb3J0cyIsIl9fZXNNb2R1bGUiLCJ3cmFwTWFwVG9Qcm9wc0NvbnN0YW50IiwiZ2V0RGVwZW5kc09uT3duUHJvcHMiLCJ3cmFwTWFwVG9Qcm9wc0Z1bmMiLCJfdmVyaWZ5UGxhaW5PYmplY3QiLCJnZXRDb25zdGFudCIsImluaXRDb25zdGFudFNlbGVjdG9yIiwiZGlzcGF0Y2giLCJvcHRpb25zIiwiY29uc3RhbnQiLCJjb25zdGFudFNlbGVjdG9yIiwiZGVwZW5kc09uT3duUHJvcHMiLCJtYXBUb1Byb3BzIiwidW5kZWZpbmVkIiwiQm9vbGVhbiIsImxlbmd0aCIsIm1ldGhvZE5hbWUiLCJpbml0UHJveHlTZWxlY3RvciIsIl9yZWYiLCJkaXNwbGF5TmFtZSIsInByb3h5IiwibWFwVG9Qcm9wc1Byb3h5Iiwic3RhdGVPckRpc3BhdGNoIiwib3duUHJvcHMiLCJkZXRlY3RGYWN0b3J5QW5kVmVyaWZ5IiwicHJvcHMiLCJwcm9jZXNzIiwiZW52IiwiTk9ERV9FTlYiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBLElBQUlBLHNCQUFzQixHQUFHQyxPQUFPLENBQUMsOENBQUQsQ0FBcEM7O0FBRUFDLE9BQU8sQ0FBQ0MsVUFBUixHQUFxQixJQUFyQjtBQUNBRCxPQUFPLENBQUNFLHNCQUFSLEdBQWlDQSxzQkFBakM7QUFDQUYsT0FBTyxDQUFDRyxvQkFBUixHQUErQkEsb0JBQS9CO0FBQ0FILE9BQU8sQ0FBQ0ksa0JBQVIsR0FBNkJBLGtCQUE3Qjs7QUFFQSxJQUFJQyxrQkFBa0IsR0FBR1Asc0JBQXNCLENBQUNDLE9BQU8sOEJBQVIsQ0FBL0M7O0FBRUEsU0FBU0csc0JBQVQsQ0FBZ0NJLFdBQWhDLEVBQTZDO0FBQzNDLFNBQU8sU0FBU0Msb0JBQVQsQ0FBOEJDLFFBQTlCLEVBQXdDQyxPQUF4QyxFQUFpRDtBQUN0RCxRQUFJQyxRQUFRLEdBQUdKLFdBQVcsQ0FBQ0UsUUFBRCxFQUFXQyxPQUFYLENBQTFCOztBQUVBLGFBQVNFLGdCQUFULEdBQTRCO0FBQzFCLGFBQU9ELFFBQVA7QUFDRDs7QUFFREMsSUFBQUEsZ0JBQWdCLENBQUNDLGlCQUFqQixHQUFxQyxLQUFyQztBQUNBLFdBQU9ELGdCQUFQO0FBQ0QsR0FURDtBQVVEOztBQVNELFNBQVNSLG9CQUFULENBQThCVSxVQUE5QixFQUEwQztBQUN4QyxTQUFPQSxVQUFVLENBQUNELGlCQUFYLEtBQWlDLElBQWpDLElBQXlDQyxVQUFVLENBQUNELGlCQUFYLEtBQWlDRSxTQUExRSxHQUFzRkMsT0FBTyxDQUFDRixVQUFVLENBQUNELGlCQUFaLENBQTdGLEdBQThIQyxVQUFVLENBQUNHLE1BQVgsS0FBc0IsQ0FBM0o7QUFDRDs7QUFjRCxTQUFTWixrQkFBVCxDQUE0QlMsVUFBNUIsRUFBd0NJLFVBQXhDLEVBQW9EO0FBQ2xELFNBQU8sU0FBU0MsaUJBQVQsQ0FBMkJWLFFBQTNCLEVBQXFDVyxJQUFyQyxFQUEyQztBQUNoRCxRQUFJQyxXQUFXLEdBQUdELElBQUksQ0FBQ0MsV0FBdkI7O0FBRUEsUUFBSUMsS0FBSyxHQUFHLFNBQVNDLGVBQVQsQ0FBeUJDLGVBQXpCLEVBQTBDQyxRQUExQyxFQUFvRDtBQUM5RCxhQUFPSCxLQUFLLENBQUNULGlCQUFOLEdBQTBCUyxLQUFLLENBQUNSLFVBQU4sQ0FBaUJVLGVBQWpCLEVBQWtDQyxRQUFsQyxDQUExQixHQUF3RUgsS0FBSyxDQUFDUixVQUFOLENBQWlCVSxlQUFqQixDQUEvRTtBQUNELEtBRkQ7O0FBS0FGLElBQUFBLEtBQUssQ0FBQ1QsaUJBQU4sR0FBMEIsSUFBMUI7O0FBRUFTLElBQUFBLEtBQUssQ0FBQ1IsVUFBTixHQUFtQixTQUFTWSxzQkFBVCxDQUFnQ0YsZUFBaEMsRUFBaURDLFFBQWpELEVBQTJEO0FBQzVFSCxNQUFBQSxLQUFLLENBQUNSLFVBQU4sR0FBbUJBLFVBQW5CO0FBQ0FRLE1BQUFBLEtBQUssQ0FBQ1QsaUJBQU4sR0FBMEJULG9CQUFvQixDQUFDVSxVQUFELENBQTlDO0FBQ0EsVUFBSWEsS0FBSyxHQUFHTCxLQUFLLENBQUNFLGVBQUQsRUFBa0JDLFFBQWxCLENBQWpCOztBQUVBLFVBQUksT0FBT0UsS0FBUCxLQUFpQixVQUFyQixFQUFpQztBQUMvQkwsUUFBQUEsS0FBSyxDQUFDUixVQUFOLEdBQW1CYSxLQUFuQjtBQUNBTCxRQUFBQSxLQUFLLENBQUNULGlCQUFOLEdBQTBCVCxvQkFBb0IsQ0FBQ3VCLEtBQUQsQ0FBOUM7QUFDQUEsUUFBQUEsS0FBSyxHQUFHTCxLQUFLLENBQUNFLGVBQUQsRUFBa0JDLFFBQWxCLENBQWI7QUFDRDs7QUFFRCxVQUFJRyxPQUFPLENBQUNDLEdBQVIsQ0FBWUMsUUFBWixLQUF5QixZQUE3QixFQUEyQyxDQUFDLEdBQUd4QixrQkFBa0IsQ0FBQyxTQUFELENBQXRCLEVBQW1DcUIsS0FBbkMsRUFBMENOLFdBQTFDLEVBQXVESCxVQUF2RDtBQUMzQyxhQUFPUyxLQUFQO0FBQ0QsS0FiRDs7QUFlQSxXQUFPTCxLQUFQO0FBQ0QsR0ExQkQ7QUEyQkQiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxudmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9pbnRlcm9wUmVxdWlyZURlZmF1bHRcIik7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5leHBvcnRzLndyYXBNYXBUb1Byb3BzQ29uc3RhbnQgPSB3cmFwTWFwVG9Qcm9wc0NvbnN0YW50O1xuZXhwb3J0cy5nZXREZXBlbmRzT25Pd25Qcm9wcyA9IGdldERlcGVuZHNPbk93blByb3BzO1xuZXhwb3J0cy53cmFwTWFwVG9Qcm9wc0Z1bmMgPSB3cmFwTWFwVG9Qcm9wc0Z1bmM7XG5cbnZhciBfdmVyaWZ5UGxhaW5PYmplY3QgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuLi91dGlscy92ZXJpZnlQbGFpbk9iamVjdFwiKSk7XG5cbmZ1bmN0aW9uIHdyYXBNYXBUb1Byb3BzQ29uc3RhbnQoZ2V0Q29uc3RhbnQpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIGluaXRDb25zdGFudFNlbGVjdG9yKGRpc3BhdGNoLCBvcHRpb25zKSB7XG4gICAgdmFyIGNvbnN0YW50ID0gZ2V0Q29uc3RhbnQoZGlzcGF0Y2gsIG9wdGlvbnMpO1xuXG4gICAgZnVuY3Rpb24gY29uc3RhbnRTZWxlY3RvcigpIHtcbiAgICAgIHJldHVybiBjb25zdGFudDtcbiAgICB9XG5cbiAgICBjb25zdGFudFNlbGVjdG9yLmRlcGVuZHNPbk93blByb3BzID0gZmFsc2U7XG4gICAgcmV0dXJuIGNvbnN0YW50U2VsZWN0b3I7XG4gIH07XG59IC8vIGRlcGVuZHNPbk93blByb3BzIGlzIHVzZWQgYnkgY3JlYXRlTWFwVG9Qcm9wc1Byb3h5IHRvIGRldGVybWluZSB3aGV0aGVyIHRvIHBhc3MgcHJvcHMgYXMgYXJnc1xuLy8gdG8gdGhlIG1hcFRvUHJvcHMgZnVuY3Rpb24gYmVpbmcgd3JhcHBlZC4gSXQgaXMgYWxzbyB1c2VkIGJ5IG1ha2VQdXJlUHJvcHNTZWxlY3RvciB0byBkZXRlcm1pbmVcbi8vIHdoZXRoZXIgbWFwVG9Qcm9wcyBuZWVkcyB0byBiZSBpbnZva2VkIHdoZW4gcHJvcHMgaGF2ZSBjaGFuZ2VkLlxuLy9cbi8vIEEgbGVuZ3RoIG9mIG9uZSBzaWduYWxzIHRoYXQgbWFwVG9Qcm9wcyBkb2VzIG5vdCBkZXBlbmQgb24gcHJvcHMgZnJvbSB0aGUgcGFyZW50IGNvbXBvbmVudC5cbi8vIEEgbGVuZ3RoIG9mIHplcm8gaXMgYXNzdW1lZCB0byBtZWFuIG1hcFRvUHJvcHMgaXMgZ2V0dGluZyBhcmdzIHZpYSBhcmd1bWVudHMgb3IgLi4uYXJncyBhbmRcbi8vIHRoZXJlZm9yZSBub3QgcmVwb3J0aW5nIGl0cyBsZW5ndGggYWNjdXJhdGVseS4uXG5cblxuZnVuY3Rpb24gZ2V0RGVwZW5kc09uT3duUHJvcHMobWFwVG9Qcm9wcykge1xuICByZXR1cm4gbWFwVG9Qcm9wcy5kZXBlbmRzT25Pd25Qcm9wcyAhPT0gbnVsbCAmJiBtYXBUb1Byb3BzLmRlcGVuZHNPbk93blByb3BzICE9PSB1bmRlZmluZWQgPyBCb29sZWFuKG1hcFRvUHJvcHMuZGVwZW5kc09uT3duUHJvcHMpIDogbWFwVG9Qcm9wcy5sZW5ndGggIT09IDE7XG59IC8vIFVzZWQgYnkgd2hlbk1hcFN0YXRlVG9Qcm9wc0lzRnVuY3Rpb24gYW5kIHdoZW5NYXBEaXNwYXRjaFRvUHJvcHNJc0Z1bmN0aW9uLFxuLy8gdGhpcyBmdW5jdGlvbiB3cmFwcyBtYXBUb1Byb3BzIGluIGEgcHJveHkgZnVuY3Rpb24gd2hpY2ggZG9lcyBzZXZlcmFsIHRoaW5nczpcbi8vXG4vLyAgKiBEZXRlY3RzIHdoZXRoZXIgdGhlIG1hcFRvUHJvcHMgZnVuY3Rpb24gYmVpbmcgY2FsbGVkIGRlcGVuZHMgb24gcHJvcHMsIHdoaWNoXG4vLyAgICBpcyB1c2VkIGJ5IHNlbGVjdG9yRmFjdG9yeSB0byBkZWNpZGUgaWYgaXQgc2hvdWxkIHJlaW52b2tlIG9uIHByb3BzIGNoYW5nZXMuXG4vL1xuLy8gICogT24gZmlyc3QgY2FsbCwgaGFuZGxlcyBtYXBUb1Byb3BzIGlmIHJldHVybnMgYW5vdGhlciBmdW5jdGlvbiwgYW5kIHRyZWF0cyB0aGF0XG4vLyAgICBuZXcgZnVuY3Rpb24gYXMgdGhlIHRydWUgbWFwVG9Qcm9wcyBmb3Igc3Vic2VxdWVudCBjYWxscy5cbi8vXG4vLyAgKiBPbiBmaXJzdCBjYWxsLCB2ZXJpZmllcyB0aGUgZmlyc3QgcmVzdWx0IGlzIGEgcGxhaW4gb2JqZWN0LCBpbiBvcmRlciB0byB3YXJuXG4vLyAgICB0aGUgZGV2ZWxvcGVyIHRoYXQgdGhlaXIgbWFwVG9Qcm9wcyBmdW5jdGlvbiBpcyBub3QgcmV0dXJuaW5nIGEgdmFsaWQgcmVzdWx0LlxuLy9cblxuXG5mdW5jdGlvbiB3cmFwTWFwVG9Qcm9wc0Z1bmMobWFwVG9Qcm9wcywgbWV0aG9kTmFtZSkge1xuICByZXR1cm4gZnVuY3Rpb24gaW5pdFByb3h5U2VsZWN0b3IoZGlzcGF0Y2gsIF9yZWYpIHtcbiAgICB2YXIgZGlzcGxheU5hbWUgPSBfcmVmLmRpc3BsYXlOYW1lO1xuXG4gICAgdmFyIHByb3h5ID0gZnVuY3Rpb24gbWFwVG9Qcm9wc1Byb3h5KHN0YXRlT3JEaXNwYXRjaCwgb3duUHJvcHMpIHtcbiAgICAgIHJldHVybiBwcm94eS5kZXBlbmRzT25Pd25Qcm9wcyA/IHByb3h5Lm1hcFRvUHJvcHMoc3RhdGVPckRpc3BhdGNoLCBvd25Qcm9wcykgOiBwcm94eS5tYXBUb1Byb3BzKHN0YXRlT3JEaXNwYXRjaCk7XG4gICAgfTsgLy8gYWxsb3cgZGV0ZWN0RmFjdG9yeUFuZFZlcmlmeSB0byBnZXQgb3duUHJvcHNcblxuXG4gICAgcHJveHkuZGVwZW5kc09uT3duUHJvcHMgPSB0cnVlO1xuXG4gICAgcHJveHkubWFwVG9Qcm9wcyA9IGZ1bmN0aW9uIGRldGVjdEZhY3RvcnlBbmRWZXJpZnkoc3RhdGVPckRpc3BhdGNoLCBvd25Qcm9wcykge1xuICAgICAgcHJveHkubWFwVG9Qcm9wcyA9IG1hcFRvUHJvcHM7XG4gICAgICBwcm94eS5kZXBlbmRzT25Pd25Qcm9wcyA9IGdldERlcGVuZHNPbk93blByb3BzKG1hcFRvUHJvcHMpO1xuICAgICAgdmFyIHByb3BzID0gcHJveHkoc3RhdGVPckRpc3BhdGNoLCBvd25Qcm9wcyk7XG5cbiAgICAgIGlmICh0eXBlb2YgcHJvcHMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcHJveHkubWFwVG9Qcm9wcyA9IHByb3BzO1xuICAgICAgICBwcm94eS5kZXBlbmRzT25Pd25Qcm9wcyA9IGdldERlcGVuZHNPbk93blByb3BzKHByb3BzKTtcbiAgICAgICAgcHJvcHMgPSBwcm94eShzdGF0ZU9yRGlzcGF0Y2gsIG93blByb3BzKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICgwLCBfdmVyaWZ5UGxhaW5PYmplY3RbXCJkZWZhdWx0XCJdKShwcm9wcywgZGlzcGxheU5hbWUsIG1ldGhvZE5hbWUpO1xuICAgICAgcmV0dXJuIHByb3BzO1xuICAgIH07XG5cbiAgICByZXR1cm4gcHJveHk7XG4gIH07XG59Il19