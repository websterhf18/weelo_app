{"version":3,"sources":["byText.js"],"names":["Object","defineProperty","exports","value","queryByText","queryAllByText","getByText","getAllByText","findByText","findAllByText","React","_interopRequireWildcard","require","_makeQueries","_filterNodeByType","_errors","_getRequireWildcardCache","WeakMap","cache","obj","__esModule","default","has","get","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","getChildrenAsText","children","TextComponent","textContent","Children","forEach","child","_child$props","push","toString","props","filterNodeByType","length","getNodeByText","node","text","Text","isTextComponent","textChildren","textToTest","join","test","error","createLibraryNotSupportedError","instance","queryAllByTextFn","results","findAll","getMultipleError","String","getMissingError","makeQueries","getBy","getAllBy","queryBy","findBy","findAllBy"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.queryByText = exports.queryAllByText = exports.getByText = exports.getAllByText = exports.findByText = exports.findAllByText = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _makeQueries = require(\"./makeQueries\");\n\nvar _filterNodeByType = require(\"./filterNodeByType\");\n\nvar _errors = require(\"./errors\");\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function () { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nconst getChildrenAsText = (children, TextComponent, textContent = []) => {\n  React.Children.forEach(children, child => {\n    var _child$props;\n\n    if (typeof child === 'string') {\n      textContent.push(child);\n      return;\n    }\n\n    if (typeof child === 'number') {\n      textContent.push(child.toString());\n      return;\n    }\n\n    if (child !== null && child !== void 0 && (_child$props = child.props) !== null && _child$props !== void 0 && _child$props.children) {\n      // Bail on traversing text children down the tree if current node (child)\n      // has no text. In such situations, react-test-renderer will traverse down\n      // this tree in a separate call and run this query again. As a result, the\n      // query will match the deepest text node that matches requested text.\n      if ((0, _filterNodeByType.filterNodeByType)(child, TextComponent) && textContent.length === 0) {\n        return;\n      }\n\n      getChildrenAsText(child.props.children, TextComponent, textContent);\n    }\n  });\n  return textContent;\n};\n\nconst getNodeByText = (node, text) => {\n  try {\n    const {\n      Text\n    } = require('react-native');\n\n    const isTextComponent = (0, _filterNodeByType.filterNodeByType)(node, Text);\n\n    if (isTextComponent) {\n      const textChildren = getChildrenAsText(node.props.children, Text);\n\n      if (textChildren) {\n        const textToTest = textChildren.join('');\n        return typeof text === 'string' ? text === textToTest : text.test(textToTest);\n      }\n    }\n\n    return false;\n  } catch (error) {\n    throw (0, _errors.createLibraryNotSupportedError)(error);\n  }\n};\n\nconst queryAllByText = instance => function queryAllByTextFn(text) {\n  const results = instance.findAll(node => getNodeByText(node, text));\n  return results;\n};\n\nexports.queryAllByText = queryAllByText;\n\nconst getMultipleError = text => `Found multiple elements with text: ${String(text)}`;\n\nconst getMissingError = text => `Unable to find an element with text: ${String(text)}`;\n\nconst {\n  getBy: getByText,\n  getAllBy: getAllByText,\n  queryBy: queryByText,\n  findBy: findByText,\n  findAllBy: findAllByText\n} = (0, _makeQueries.makeQueries)(queryAllByText, getMissingError, getMultipleError);\nexports.findAllByText = findAllByText;\nexports.findByText = findByText;\nexports.queryByText = queryByText;\nexports.getAllByText = getAllByText;\nexports.getByText = getByText;"]}