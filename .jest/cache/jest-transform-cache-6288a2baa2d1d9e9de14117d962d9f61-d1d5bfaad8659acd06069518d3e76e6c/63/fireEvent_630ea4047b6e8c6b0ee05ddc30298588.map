{"version":3,"sources":["fireEvent.js"],"names":["Object","defineProperty","exports","value","default","_act","_interopRequireDefault","require","_errors","obj","__esModule","isHostElement","element","type","isTextInput","TextInput","isTouchResponder","props","onStartShouldSetResponder","isPointerEventEnabled","isParent","parentCondition","pointerEvents","parent","isEventEnabled","touchResponder","_touchResponder$props","_touchResponder$props2","_touchResponder$props3","_touchResponder$props4","editable","touchStart","call","touchMove","onMoveShouldSetResponder","undefined","findEventHandler","eventName","callsite","nearestTouchResponder","hasDescendandHandler","handler","getEventHandler","hasHandler","ErrorWithStack","invokeEvent","eventHandlerName","toEventHandlerName","data","returnValue","charAt","toUpperCase","slice","pressHandler","changeTextHandler","scrollHandler","fireEvent","press","changeText","scroll","_default"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _act = _interopRequireDefault(require(\"./act\"));\n\nvar _errors = require(\"./helpers/errors\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst isHostElement = element => {\n  return typeof (element === null || element === void 0 ? void 0 : element.type) === 'string';\n};\n\nconst isTextInput = element => {\n  const {\n    TextInput\n  } = require('react-native');\n\n  return (element === null || element === void 0 ? void 0 : element.type) === TextInput;\n};\n\nconst isTouchResponder = element => {\n  if (!isHostElement(element)) return false;\n  return !!(element !== null && element !== void 0 && element.props.onStartShouldSetResponder) || isTextInput(element);\n};\n\nconst isPointerEventEnabled = (element, isParent) => {\n  const parentCondition = isParent ? (element === null || element === void 0 ? void 0 : element.props.pointerEvents) === 'box-only' : (element === null || element === void 0 ? void 0 : element.props.pointerEvents) === 'box-none';\n\n  if ((element === null || element === void 0 ? void 0 : element.props.pointerEvents) === 'none' || parentCondition) {\n    return false;\n  }\n\n  if (!(element !== null && element !== void 0 && element.parent)) return true;\n  return isPointerEventEnabled(element.parent, true);\n};\n\nconst isEventEnabled = (element, touchResponder) => {\n  var _touchResponder$props, _touchResponder$props2, _touchResponder$props3, _touchResponder$props4;\n\n  if (isTextInput(element)) return (element === null || element === void 0 ? void 0 : element.props.editable) !== false;\n  if (!isPointerEventEnabled(element)) return false;\n  const touchStart = touchResponder === null || touchResponder === void 0 ? void 0 : (_touchResponder$props = (_touchResponder$props2 = touchResponder.props).onStartShouldSetResponder) === null || _touchResponder$props === void 0 ? void 0 : _touchResponder$props.call(_touchResponder$props2);\n  const touchMove = touchResponder === null || touchResponder === void 0 ? void 0 : (_touchResponder$props3 = (_touchResponder$props4 = touchResponder.props).onMoveShouldSetResponder) === null || _touchResponder$props3 === void 0 ? void 0 : _touchResponder$props3.call(_touchResponder$props4);\n  if (touchStart || touchMove) return true;\n  return touchStart === undefined && touchMove === undefined;\n};\n\nconst findEventHandler = (element, eventName, callsite, nearestTouchResponder, hasDescendandHandler) => {\n  const touchResponder = isTouchResponder(element) ? element : nearestTouchResponder;\n  const handler = getEventHandler(element, eventName);\n  if (handler && isEventEnabled(element, touchResponder)) return handler; // Do not bubble event to the root element\n\n  const hasHandler = handler != null || hasDescendandHandler;\n\n  if (element.parent === null || element.parent.parent === null) {\n    if (hasHandler) {\n      return null;\n    } else {\n      throw new _errors.ErrorWithStack(`No handler function found for event: \"${eventName}\"`, callsite || invokeEvent);\n    }\n  }\n\n  return findEventHandler(element.parent, eventName, callsite, touchResponder, hasHandler);\n};\n\nconst getEventHandler = (element, eventName) => {\n  const eventHandlerName = toEventHandlerName(eventName);\n\n  if (typeof element.props[eventHandlerName] === 'function') {\n    return element.props[eventHandlerName];\n  }\n\n  if (typeof element.props[eventName] === 'function') {\n    return element.props[eventName];\n  }\n\n  return undefined;\n};\n\nconst invokeEvent = (element, eventName, callsite, ...data) => {\n  const handler = findEventHandler(element, eventName, callsite);\n\n  if (!handler) {\n    return;\n  }\n\n  let returnValue;\n  (0, _act.default)(() => {\n    returnValue = handler(...data);\n  });\n  return returnValue;\n};\n\nconst toEventHandlerName = eventName => `on${eventName.charAt(0).toUpperCase()}${eventName.slice(1)}`;\n\nconst pressHandler = element => invokeEvent(element, 'press', pressHandler);\n\nconst changeTextHandler = (element, ...data) => invokeEvent(element, 'changeText', changeTextHandler, ...data);\n\nconst scrollHandler = (element, ...data) => invokeEvent(element, 'scroll', scrollHandler, ...data);\n\nconst fireEvent = (element, eventName, ...data) => invokeEvent(element, eventName, fireEvent, ...data);\n\nfireEvent.press = pressHandler;\nfireEvent.changeText = changeTextHandler;\nfireEvent.scroll = scrollHandler;\nvar _default = fireEvent;\nexports.default = _default;"]}